<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kink Artist Explorer</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #121212;
      color: #eee;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      background-size: cover;
      background-position: center;
      transition: background-image 1s ease-in-out;
    }
    h1 {
      background: linear-gradient(to right, #ff66cc, #aa88ff);
      margin: 0;
      padding: 1rem;
      text-align: center;
      color: white;
      font-weight: bold;
    }
    .table-container {
      overflow-x: auto;
      max-width: 100vw;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      font-size: 0.8rem;
    }
    th, td {
      border: 1px solid #333;
      padding: 0.3rem;
      text-align: center;
    }
    th {
      position: sticky;
      top: 0;
      background: #2a2a2a;
      color: #ffb6ff;
    }
    td.true {
      background: #ff66cc;
      color: black;
      font-weight: bold;
      box-shadow: inset 0 0 4px #fff;
    }
    td.false {
      background: #1e1e1e;
      color: #666;
    }
    tr:hover {
      background-color: #333;
    }
    .filter-wrap {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.4rem;
      margin: 1rem auto;
      max-width: 90vw;
    }
    .filter-btn {
      padding: 0.5rem 0.8rem;
      background: #2a2a2a;
      color: white;
      border: 1px solid #666;
      border-radius: 6px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .filter-btn.active {
      background: #ff66cc;
      color: black;
      font-weight: bold;
    }
    .filter-btn:disabled {
      background: #444;
      opacity: 0.4;
      cursor: not-allowed;
    }
    img.preview {
      width: 64px;
      height: auto;
      border-radius: 6px;
      border: 1px solid #555;
      transition: transform 0.2s ease-in-out;
    }
    img.preview:hover {
      transform: scale(2);
      z-index: 1000;
    }
    .highlighted {
      background: #ffff99 !important;
      color: black !important;
      font-weight: bold;
    }
    #audioControls {
      position: fixed;
      bottom: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.7);
      padding: 0.5rem;
      border-radius: 8px;
      z-index: 9999;
    }
  </style>
</head>
<body>
  <h1>Kink Artist Explorer</h1>
  <div id="audioControls">
    <audio id="bgAudio" controls preload="none">
      <source src="assets/audio/femdom_feminization_asmr.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
  </div>
  <div class="filter-wrap" id="filterButtons"></div>
  <div class="table-container">
    <table id="kink-table"></table>
  </div>
  <script>
    let csvURL = 'data.csv', kinkData = [], headers = [], activeKinks = [];function sanitizeImageURL(input) {
  return input.trim().replace(/.*\/(?!.*\/)/, '')
               .replace(/%2520/g, '%20')
               .replace(/ /g, '%20');
}

function loadCSV(url) {
  fetch(url)
    .then(r => r.text())
    .then(text => {
      let rows = text.trim().split("\n").map(r => r.split(","));
      headers = rows[0];
      kinkData = rows.slice(1);
      populateFilterButtons();
      buildTable();
    });
}

function populateFilterButtons() {
  const filterWrap = document.getElementById("filterButtons");
  const kinkHeaders = headers.slice(6);

  let filtered = {};
  kinkHeaders.forEach(k => filtered[k] = false);
  kinkData.forEach(row => {
    kinkHeaders.forEach((k, i) => {
      if (row[6 + i] === '1') filtered[k] = true;
    });
  });

  Object.keys(filtered).forEach(kink => {
    if (filtered[kink]) {
      let btn = document.createElement("button");
      btn.textContent = kink;
      btn.className = "filter-btn";
      btn.onclick = () => toggleFilter(kink, btn);
      filterWrap.appendChild(btn);
    }
  });
}

function toggleFilter(kink, btn) {
  const index = activeKinks.indexOf(kink);
  if (index > -1) {
    activeKinks.splice(index, 1);
    btn.classList.remove("active");
  } else {
    activeKinks.push(kink);
    btn.classList.add("active");
  }
  buildTable();
  updateBackgroundImage();
}

function updateBackgroundImage() {
  if (activeKinks.length > 0) {
    let tag = encodeURIComponent(activeKinks[activeKinks.length - 1]);
    let url = `https://danbooru.donmai.us/posts.json?tags=${tag}+rating%3Aexplicit&limit=1&random=true`;
    fetch(url)
      .then(res => res.json())
      .then(json => {
        if (json[0]?.large_file_url) {
          let src = `https://danbooru.donmai.us${json[0].large_file_url}`;
          document.body.style.backgroundImage = `url('${src}')`;
        }
      });
  }
}

function buildTable() {
  let table = document.getElementById("kink-table");
  table.innerHTML = "";
  let thead = document.createElement("thead");
  let headerRow = document.createElement("tr");
  headers.forEach(h => {
    let th = document.createElement("th");
    th.textContent = h;
    headerRow.appendChild(th);
  });
  thead.appendChild(headerRow);
  table.appendChild(thead);

  let tbody = document.createElement("tbody");
  kinkData.forEach(row => {
    let matches = activeKinks.every(k => row[headers.indexOf(k)] === '1');
    if (activeKinks.length === 0 || matches) {
      let tr = document.createElement("tr");
      row.forEach((val, i) => {
        let td = document.createElement("td");
        if (headers[i] === "Image URL") {
          let img = document.createElement("img");
          img.src = `https://cdn.zele.st/data/NAX/Images/danbooru-artist-tags-v4.5/${sanitizeImageURL(val)}`;
          img.className = "preview";
          td.appendChild(img);
        } else {
          td.textContent = val;
          if (i >= 6) {
            td.className = val === '1' ? 'true' : 'false';
            if (activeKinks.includes(headers[i]) && val === '1') {
              td.classList.add('highlighted');
            }
          }
        }
        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    }
  });
  table.appendChild(tbody);
}

loadCSV(csvURL);

  </script>
</body>
</html>
