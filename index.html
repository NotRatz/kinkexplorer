<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kink Artist Explorer</title>
  <style>
    body { font-family: sans-serif; background: #121212; color: #eee; margin: 0; padding: 0; }
    h1 { background: linear-gradient(to right, #ff66cc, #aa88ff); margin: 0; padding: 1rem; text-align: center; color: white; font-weight: bold; }
    .filter-container { display: flex; flex-wrap: wrap; justify-content: center; padding: 1rem; gap: 0.5rem; }
    .filter-button {
      background: #2a2a2a;
      color: white;
      border: 1px solid #666;
      border-radius: 20px;
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .filter-button.active {
      background-color: #ff66cc;
      color: black;
      font-weight: bold;
    }
    .table-container { overflow-x: auto; max-width: 100vw; padding: 1rem; }
    table { border-collapse: collapse; width: 100%; font-size: 0.8rem; margin-top: 1rem; }
    th, td { border: 1px solid #333; padding: 0.3rem; text-align: center; }
    th { position: sticky; top: 0; background: #2a2a2a; color: #ffb6ff; }
    td.true { background: #ff66cc; color: black; font-weight: bold; box-shadow: inset 0 0 4px #fff; }
    td.false { background: #1e1e1e; color: #666; }
    tr:hover { background-color: #333; }
    img.preview {
      width: 64px;
      height: auto;
      border-radius: 6px;
      border: 1px solid #555;
      transition: transform 0.3s ease-in-out;
    }
    img.preview:hover {
      transform: scale(2.5);
      z-index: 10;
    }
  </style>
</head>
<body>
  <h1>Kink Artist Explorer</h1>
  <div id="filter-buttons" class="filter-container"></div>
  <div class="table-container">
    <table id="kink-table"></table>
  </div>
  <script>
    let csvURL = 'merged_chastity_kink_dataset.csv', kinkData = [], headers = [], activeKinks = [];function loadCSV(url) {
  fetch(url)
    .then(r => r.text())
    .then(text => {
      let rows = text.trim().split("\n").map(r => r.split(','));
      headers = rows[0];
      kinkData = rows.slice(1);
      populateButtons();
      buildTable();
    });
}

function populateButtons() {
  const container = document.getElementById("filter-buttons");
  container.innerHTML = '';
  headers.slice(6).forEach(k => {
    const hasData = kinkData.some(row => row[headers.indexOf(k)] === '1');
    if (hasData) {
      let btn = document.createElement("button");
      btn.textContent = k;
      btn.className = "filter-button";
      btn.onclick = () => {
        if (activeKinks.includes(k)) {
          activeKinks = activeKinks.filter(ak => ak !== k);
          btn.classList.remove("active");
        } else {
          activeKinks.push(k);
          btn.classList.add("active");
        }
        buildTable();
      };
      container.appendChild(btn);
    }
  });
}

function buildTable() {
  let table = document.getElementById("kink-table");
  table.innerHTML = "";

  let thead = document.createElement("thead");
  let headerRow = document.createElement("tr");
  headers.forEach(h => {
    let th = document.createElement("th");
    th.textContent = h;
    headerRow.appendChild(th);
  });
  thead.appendChild(headerRow);
  table.appendChild(thead);

  let tbody = document.createElement("tbody");
  kinkData.forEach(row => {
    let matches = activeKinks.every(k => row[headers.indexOf(k)] === '1');
    if (activeKinks.length === 0 || matches) {
      let tr = document.createElement("tr");
      row.forEach((val, i) => {
        let td = document.createElement("td");
        if (headers[i] === "Image URL") {
          let img = document.createElement("img");
          img.src = val.replace(/.*\/(?!.*\/)/, '').replace(/%2520/g, '%20');
          img.src = `https://cdn.zele.st/data/NAX/Images/danbooru-artist-tags-v4.5/${img.src}`;
          img.className = "preview";
          td.appendChild(img);
        } else {
          td.textContent = val;
          if (i >= 6) {
            td.className = val === '1' ? 'true' : 'false';
          }
        }
        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    }
  });
  table.appendChild(tbody);
}

loadCSV(csvURL);

  </script>
</body>
</html>