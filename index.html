<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kink Artist Explorer</title>
  <style>
    body { font-family: sans-serif; background: #121212; color: #eee; margin: 0; padding: 0; }
    h1 { background: linear-gradient(to right, #ff66cc, #aa88ff); margin: 0; padding: 1rem; text-align: center; color: white; font-weight: bold; }
    .tab-buttons { display: flex; justify-content: center; gap: 1rem; background: #1e1e1e; padding: 1rem; flex-wrap: wrap; }
    .tab-buttons button { padding: 0.5rem 1rem; border: none; background: #333; color: white; cursor: pointer; border-radius: 4px; }
    .tab-buttons button.active { background: #ff66cc; color: black; font-weight: bold; }
    .table-container { overflow-x: auto; max-width: 100vw; }
    table { border-collapse: collapse; width: 100%; font-size: 0.8rem; }
    th, td { border: 1px solid #333; padding: 0.3rem; text-align: center; }
    th { position: sticky; top: 0; background: #2a2a2a; color: #ffb6ff; }
    td.true { background: #ff66cc; color: black; font-weight: bold; box-shadow: inset 0 0 4px #fff; }
    td.false { background: #1e1e1e; color: #666; }
    tr:hover { background-color: #333; }
    select, .filter-box { margin: 1rem auto; display: block; padding: 0.6rem; background: #2a2a2a; color: white; border: 1px solid #666; border-radius: 4px; font-size: 1rem; }
    img.preview { width: 64px; height: auto; border-radius: 6px; border: 1px solid #555; }
    .highlighted { background: #ffff99 !important; color: black !important; font-weight: bold; }
    .checkbox-list { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; max-height: 200px; overflow-y: auto; margin: 0.5rem; }
    .checkbox-list label { font-size: 0.8rem; background: #2a2a2a; padding: 0.2rem 0.4rem; border-radius: 4px; cursor: pointer; }
    .checkbox-list input[type="checkbox"] { margin-right: 0.3rem; }
  </style>
</head>
<body>
  <h1>Kink Artist Explorer</h1>
  <div class="tab-buttons">
    <button onclick="switchCSV('data_chastity.csv', this)" class="active">Chastity Set</button>
    <button onclick="switchCSV('data_ntr_condom.csv', this)">NTR + Cum Feeding</button>
    <button onclick="switchCSV('flat_chastity_artists.csv', this)">Flat Chastity Artists</button>
  </div>
  <div class="checkbox-list" id="checkboxes"></div>
  <div class="table-container">
    <table id="kink-table"></table>
  </div>
  <script>
    let csvURL = 'data_chastity.csv', kinkData = [], headers = [], kinkColumns = [
  'futanari', 'femboy', 'anal', 'anal fingering', 'prostate milking', 'pegging', 'assertive female',
  'bondage', 'clothed female nude male', 'dominatrix', 'footjob', 'shoejob', 'sockjob', 'girl on top',
  'amazon position', 'cowgirl position', 'reverse cowgirl position', 'sitting on face', 'humiliation',
  'premature ejaculation', 'small penis humiliation', 'lolidom', 'pet play', 'viewer on leash',
  'chastity', 'chastity cage', 'flat chastity cage', 'nub chastity cage', 'revealing chastity cage', 'tube chastity cage',
  'chastity cage-belt', 'double end chastity cage', 'small chastity cage', 'large chastity cage',
  'ornate chastity cage', 'padlocked chastity cage', 'chastity cage strap', 'ball splitter',
  'inverted chastity cage', 'metal chastity cage', 'gold chastity cage', 'colored chastity cage',
  'transparent chastity cage', 'chastity cage emission', 'bulging in chastity cage', 'unworn chastity cage',
  'holding chastity cage', 'touching another\'s chastity cage', 'touching own chastity cage',
  'partially worn chastity cage', 'chastity cage visible through clothes'
];

    function loadCSV(url) {
      fetch(url)
        .then(r => r.text())
        .then(text => {
          let rows = text.trim().split("\n").map(r => r.split(","));
          headers = rows[0];
          kinkData = rows.slice(1);
          populateCheckboxes();
          buildTable();
        });
    }

    function switchCSV(url, btn) {
      document.querySelectorAll('.tab-buttons button').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      csvURL = url;
      loadCSV(csvURL);
    }

    function populateCheckboxes() {
      const box = document.getElementById("checkboxes");
      box.innerHTML = '';
      headers.filter(h => kinkColumns.includes(h)).forEach(k => {
        let label = document.createElement("label");
        let checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.value = k;
        checkbox.onchange = applyMultiFilter;
        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(k));
        box.appendChild(label);
      });
    }

    function buildTable(filters = []) {
      let table = document.getElementById("kink-table");
      table.innerHTML = "";
      let thead = document.createElement("thead");
      let headerRow = document.createElement("tr");
      headers.forEach(h => {
        let th = document.createElement("th");
        th.textContent = h;
        headerRow.appendChild(th);
      });
      thead.appendChild(headerRow);
      table.appendChild(thead);

      let tbody = document.createElement("tbody");
      kinkData.forEach(row => {
        if (filters.length && !filters.every(k => row[headers.indexOf(k)] === '1')) return;
        let tr = document.createElement("tr");
        row.forEach((val, i) => {
          let td = document.createElement("td");
          if (headers[i] === "Image URL") {
            let img = document.createElement("img");
            img.src = val;
            img.className = "preview";
            td.appendChild(img);
          } else {
            td.textContent = val;
            if (i >= 6) {
              td.className = val === '1' ? 'true' : 'false';
              if (filters.includes(headers[i]) && val === '1') {
                td.classList.add('highlighted');
              }
            }
          }
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      });
      table.appendChild(tbody);
    }

    function applyMultiFilter() {
      const selected = Array.from(document.querySelectorAll("input[type=checkbox]:checked"))
                            .map(cb => cb.value);
      buildTable(selected);
    }

    loadCSV(csvURL);
  </script>
</body>
</html>
