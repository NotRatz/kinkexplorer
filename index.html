
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kink Artist Explorer</title>
  <style>
    body {{ font-family: sans-serif; background: #121212; color: #eee; margin: 0; padding: 0; }}
    h1 {{ background: linear-gradient(to right, #ff66cc, #aa88ff); margin: 0; padding: 1rem; text-align: center; color: white; font-weight: bold; }}
    .table-container {{ overflow-x: auto; max-width: 100vw; }}
    table {{ border-collapse: collapse; width: 100%; font-size: 0.8rem; }}
    th, td {{ border: 1px solid #333; padding: 0.3rem; text-align: center; }}
    th {{ position: sticky; top: 0; background: #2a2a2a; color: #ffb6ff; }}
    td.true {{ background: #ff66cc; color: black; font-weight: bold; box-shadow: inset 0 0 4px #fff; }}
    td.false {{ background: #1e1e1e; color: #666; }}
    tr:hover {{ background-color: #333; }}
    .filter-container {{
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
      margin: 1rem;
    }}
    .filter-btn {{
      background: #2a2a2a;
      color: white;
      padding: 0.5rem 1rem;
      border: 1px solid #666;
      border-radius: 20px;
      cursor: pointer;
    }}
    .filter-btn.active {{
      background: #ff66cc;
      color: black;
      font-weight: bold;
    }}
    img.preview {{
      width: 64px;
      height: auto;
      border-radius: 6px;
      border: 1px solid #555;
      transition: transform 0.2s;
    }}
    img.preview:hover {{
      transform: scale(2.2);
      z-index: 10;
      position: relative;
    }}
  </style>
</head>
<body>
  <h1>Kink Artist Explorer</h1>
  <div class="filter-container" id="filter-container"></div>
  <div class="table-container">
    <table id="kink-table"></table>
  </div>
  <script>
    const csvFile = "merged_chastity_kink_dataset.csv";
    let kinkData = [], headers = [];

    fetch(csvFile).then(r => r.text()).then(text => {
      const rows = text.trim().split("\n").map(r => r.split(","));
      headers = rows[0];
      kinkData = rows.slice(1);
      createFilters();
      buildTable();
    });

    function createFilters() {
      const container = document.getElementById("filter-container");
      const kinks = headers.slice(6);
      kinks.forEach(k => {
        const btn = document.createElement("button");
        btn.className = "filter-btn";
        btn.textContent = k;
        btn.onclick = () => {
          btn.classList.toggle("active");
          buildTable();
        };
        container.appendChild(btn);
      });
    }

    function buildTable() {
      const activeTags = [...document.getElementsByClassName("filter-btn")]
        .filter(b => b.classList.contains("active"))
        .map(b => b.textContent);

      const table = document.getElementById("kink-table");
      table.innerHTML = "";

      const thead = document.createElement("thead");
      const headerRow = document.createElement("tr");
      headers.forEach(h => {
        const th = document.createElement("th");
        th.textContent = h;
        headerRow.appendChild(th);
      });
      thead.appendChild(headerRow);
      table.appendChild(thead);

      const tbody = document.createElement("tbody");
      kinkData.forEach(row => {
        const show = activeTags.every(tag => row[headers.indexOf(tag)] === '1');
        if (activeTags.length === 0 || show) {
          const tr = document.createElement("tr");
          row.forEach((val, i) => {
            const td = document.createElement("td");
            if (headers[i] === "Image URL") {
              const img = document.createElement("img");
              img.src = val;
              img.className = "preview";
              td.appendChild(img);
            } else {
              td.textContent = val;
              if (i >= 6) td.className = val === '1' ? 'true' : 'false';
            }
            tr.appendChild(td);
          });
          tbody.appendChild(tr);
        }
      });
      table.appendChild(tbody);
    }
  </script>
</body>
</html>
